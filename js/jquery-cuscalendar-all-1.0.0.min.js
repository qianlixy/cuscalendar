/* cuscalendar v1.0.0*/
!(function(e){function b(i,h){return Object.prototype.toString.call(i)===("[object "+h+"]")}function a(k,l){if(b(k,"Array")){for(var j=0;j<k.length;j++){if(l.call(null,j,k[j])){break}else{continue}}}else{for(var h in k){if(l.call(null,h,k[h])){break}else{continue}}}}function d(j,k,l,i,h,n,m){j.setFullYear(k);j.setMonth(l);j.setDate(i);j.setHours(h);j.setMinutes(n);j.setSeconds(m);return j}var g=function(){if(arguments.length===0){this.date=new Date()}else{if(arguments.length===1&&b(arguments[0],"Date")){this.date=arguments[0]}else{if(arguments.length===1&&b(arguments[0],"String")){this.date=g.parse(arguments[0],"yyyy-MM-dd HH:mm:ss")}else{if(arguments.length===2&&b(arguments[0],"String")&&b(arguments[1],"String")){this.date=g.parse(arguments[0],arguments[1])}else{if(arguments.length===3||arguments.length===6&&g.isInteger(arguments)){this.date=d(new Date(),arguments[0],arguments[1]-1,arguments[2],0,0,0)}}}}}if(arguments.length===6&&g.isInteger(arguments)){this.date.setHours(arguments[3]);this.date.setMinutes(arguments[4]);this.date.setSeconds(arguments[5])}if(!this.date){throw"?????"+JSON.stringify(arguments)}};g.prototype.__record=function(){if(!this.isDefer){this._backupTime=this.date.getTime()}};g.prototype.__recover=function(){if(!this.isDefer){this.date.setTime(this._backupTime)}};var c=["yyyy","MM","dd","HH","mm","ss"],f={"yyyy":"FullYear","MM":"Month","dd":"Date","HH":"Hours","mm":"Minutes","ss":"Seconds"};g.parse=function(j,l){var i=[];a(c,function(p,o){var n=l.indexOf(o);if(n>=0){i.push([o,n])}});i.sort(function(o,n){return o[1]-n[1]});var k="";a(i,function(o,n){if(0===o){k+=("(.*)"+n[0])}else{if(i.length===o+1){k+=("(.+)"+n[0]+"(.*)")}else{k+=("(.+)"+n[0])}}});var h=new RegExp(k).exec(l);k="";a(h,function(n,o){if(""===o||n===0){return false}k+=("(.+)"+o)});k+="(.+)";a(RegExp(k).exec(j),function(n,o){if(0===n){return false}i[n-1].push(o)});var m=new Date();a(i,function(o,n){m["set"+f[n[0]]].call(m,n[2])});m.setMonth(m.getMonth()-1);return m};g.isSameDay=function(i,h){var k=i,j=h;
if(!b(i,"Date")){k=g.parse(i,"yyyy-MM-dd")}if(!b(h,"Date")){j=g.parse(h,"yyyy-MM-dd")}return k.getFullYear()===j.getFullYear()&&k.getMonth()===j.getMonth()&&k.getDate()===j.getDate()};g.isInteger=function(j){if(b(j,"Array")||b("Arguments")){for(var h=0;h<j.length;h++){if(!k(j[h])){return false}}}else{return k(j)}return true;function k(i){if(typeof(i)==="undefined"||null===i||""===i){return false}try{return parseInt(i)===i}catch(l){return false}}};g._monthDays=function(){return this.offsetMonthDays()};g._prevMonthDays=function(){return this.offsetMonthDays(-1)};g._nextMonthDays=function(){return this.offsetMonthDays(1)};g._isSameDay=function(h){return g.isSameDay(this.date,h)};g._offsetMonthDays=function(n){if(Math.abs(n)>=12){var j=parseInt(Math.abs(n)/12);var m=Math.abs(n)-j*12;var h=n<0?-1:1;this.date.setFullYear(this.date.getFullYear()+j*h);this.date.setMonth(this.date.getMonth()+m*h)}else{var k=this.date.getMonth()+(n||0);this.date.setMonth(k)}var l=this.date.setDate(1);this.date.setMonth(this.date.getMonth()+1);var i=this.date.getTime();return(i-l)/86400000};g._howManyDays=function(h){this.date.setDate(h);return this.date.getDay()};g._move=function(k,l,i,h,j,m){d(this.date,k||this.date.getFullYear(),g.isInteger(l)?(l-1):this.date.getMonth(),i||this.date.getDate(),h||this.date.getHours(),j||this.date.getMinutes(),m||this.date.getSeconds());return this};g._moveYear=function(h){return this.move(h)};g._moveMonth=function(h){return this.move(null,h)};g._moveDay=function(h){return this.move(null,null,h)};a(g,function(h,i){if(h.indexOf("__")===0){return false}else{if(h.indexOf("_")===0){g.prototype[h.substr(1)]=function(){this.__record();var j=g[h].apply(this,arguments);if(j!==this){this.__recover()}return j}}}});e.Calendar=g})(window);
!(function(d,e,a){var g={tagName:"span",yearWrap:".year_wrap",monthWrap:".month_wrap",weekWrap:".week_wrap",daysWrap:".day_wrap",prevMonth:".prev",nextMonth:".next",today:".today",presetDate:new Date(),onYearClick:function(h){},onMonthClick:function(h){},onDayClick:function(i,j,h){},onPrevClick:function(h,i){},onNextClick:function(h,i){},onBuildDay:function(i,j,h){}};a.weeks=a.weeks||["周日","周一","周二","周三","周四","周五","周六"];if(!e.CusCalendar){e.CusCalendar=a}function f(k,i,j){var h=parseInt(d().jquery.replace(/\./g,""))||0;if(h<=183){d(k).live(i,j)}else{d(document).on(i,k.selector,j)}}var c=function(){this.array=[];this.appendAll(arguments)};c.prototype.appendAll=function(){for(var l=0;l<arguments.length;l++){var h=arguments[l];if(h.length&&h.length>0){for(var k=0;k<h.length;k++){this.array.push(h[k])}}else{this.array.push(arguments[l])}}};c.prototype.toString=function(){return this.array.join("")};function b(i,k,h){var j=new c("<",i);d.each(h,function(l,m){j.appendAll(" ",l,'="',m,'"')});j.appendAll(">",k||"","</",i,">");return j.toString()}d.fn.cuscal=function(s){var h=d.extend({},g,typeof s==="object"?s:{}),j=new Calendar(h.presetDate),k=arguments;var m={move:function(t,u){j.date.setFullYear(t);j.date.setMonth(u-1);q.call(this)}};return this.each(function(){var v=d(this);if(v.data("cuscal")!==true){n.call(this);f(v.find(h.yearWrap),"click",function(){h.onYearClick.call(this,j.date.getFullYear())});f(v.find(h.monthWrap),"click",function(){h.onMonthClick.call(this,j.date.getMonth()+1)});f(v.find(h.daysWrap+" .day"),"click",function(){var x=d(this),w=j.date.getMonth()+1;if(x.is(".prev_month_day")){w-=1}else{if(x.is(".next_month_day")){w+=1}}h.onDayClick.call(this,x.data("year"),x.data("month"),x.data("day"))});f(v.find(h.prevMonth),"click",function(){var w=j.date.getMonth()+1-1;if(h.onPrevClick.call(this,j.date.getFullYear(),w)!==false){j.moveMonth(w);q.call(v[0])}});f(v.find(h.nextMonth),"click",function(){var w=j.date.getMonth()+1+1;if(h.onNextClick.call(this,j.date.getFullYear(),w)!==false){j.moveMonth(w);
q.call(v[0])}});f(v.find(h.today),"click",function(){r.call(v[0])});v.data("cuscal",true)}if(typeof s=="string"&&typeof m[s]=="function"){var t=[];for(var u=0;u<k.length;u++){if(u===0){continue}t.push(k[u])}m[s].apply(this,t)}});function r(){j.date=new Date();q.call(this)}function n(t){var u=d(this);p.call(u.find(h.yearWrap));o.call(u.find(h.monthWrap));if(!t){l.call(u.find(h.weekWrap))}i.call(u.find(h.daysWrap))}function q(){n.call(this,true)}function p(){d(this).attr("data-val",j.date.getFullYear());d(this).html(j.date.getFullYear())}function o(){d(this).attr("data-val",j.date.getMonth()+1);d(this).html(j.date.getMonth()+1)}function l(){var t=d(this);d.each(a.weeks,function(u,v){t.append(b(h.tagName,v,{"class":"week","data-val":u}))})}function i(){var z=d(this),v=[],t=new Date(),A=j.date.getFullYear(),y=j.date.getMonth();z.html("");for(var x=j.howManyDays(1)-1;x>=0;x--){v.push({month:y,day:j.prevMonthDays()-x})}var B=j.monthDays();for(var w=1;w<=B;w++){v.push({month:y+1,day:w})}for(var u=1;u<(7-j.howManyDays(B));u++){v.push({month:y+2,day:u})}d.each(v,function(D,C){var E=["day"];if(C.month===j.date.getMonth()){E.push(" prev_month_day")}else{if(C.month===j.date.getMonth()+1){E.push(" cur_month_day")}else{E.push(" next_month_day")}}if(Calendar.isSameDay(t,A+"-"+C.month+"-"+C.day)){E.push(" cur_day")}var F=d(b(h.tagName,C.day,{"class":E,"data-year":A,"data-month":C.month,"data-day":C.day}));h.onBuildDay.call(F[0],A,C.month,C.day);z.append(F)})}}})(jQuery,window,typeof(CusCalendar)!="undefined"?CusCalendar:{});
